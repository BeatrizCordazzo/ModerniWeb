<app-nav></app-nav>

<main class="profile-page">
  <div class="profile-container">
    <!-- Header del perfil -->
    <section class="profile-header">
      <div class="profile-avatar">
        <img [src]="user.avatar" [alt]="user.name">
        <button class="change-avatar" aria-label="Cambiar foto">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
        </button>
      </div>
      <div class="profile-info">
        <h1>{{user.name}}</h1>
        <p class="user-email">{{user.email}}</p>
        <p class="member-since">Miembro desde {{user.memberSince}}</p>
      </div>
    </section>

    <!-- Tabs de navegación -->
    <div class="profile-tabs">
      <button 
        class="tab" 
        [class.active]="activeTab === 'credentials'"
        (click)="activeTab = 'credentials'">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
        Mis Datos
      </button>
      <button 
        class="tab" 
        [class.active]="activeTab === 'orders'"
        (click)="activeTab = 'orders'">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        Mis Pedidos
      </button>
      <button 
        class="tab" 
        [class.active]="activeTab === 'favorites'"
        (click)="activeTab = 'favorites'">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        Favoritos
      </button>
    </div>

    <!-- Contenido de las tabs -->
    <div class="tab-content">
      <!-- Credenciales -->
      <section class="credentials-section" *ngIf="activeTab === 'credentials'">
        <h2>Información Personal</h2>
        <form class="credentials-form">
          <div class="form-row">
            <div class="form-group">
              <label for="name">Nombre completo</label>
              <input type="text" id="name" [(ngModel)]="user.name" name="name">
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" id="email" [(ngModel)]="user.email" name="email">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="phone">Teléfono</label>
              <input type="tel" id="phone" [(ngModel)]="user.phone" name="phone">
            </div>
            <div class="form-group">
              <label for="address">Dirección</label>
              <input type="text" id="address" [(ngModel)]="user.address" name="address">
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="save-btn">Guardar Cambios</button>
            <button type="button" class="change-password-btn">Cambiar Contraseña</button>
          </div>
        </form>
      </section>

      <!-- Pedidos -->
      <section class="orders-section" *ngIf="activeTab === 'orders'">
        <h2>Historial de Pedidos</h2>
        <div class="orders-list">
          <article class="order-card" *ngFor="let order of orders">
            <div class="order-header">
              <div class="order-info">
                <h3>Pedido #{{order.id}}</h3>
                <span class="order-date">{{order.date}}</span>
              </div>
              <span class="order-status" [class]="order.status">{{getStatusText(order.status)}}</span>
            </div>
            
            <div class="order-items">
              <div class="order-item" *ngFor="let item of order.items">
                <img [src]="item.image" [alt]="item.name">
                <div class="item-details">
                  <h4>{{item.name}}</h4>
                  <p>Cantidad: {{item.quantity}}</p>
                </div>
                <span class="item-price">${{item.price}}</span>
              </div>
            </div>
            
            <div class="order-footer">
              <span class="order-total">Total: ${{order.total}}</span>
              <button class="view-details-btn">Ver Detalles</button>
            </div>
          </article>

          <p class="empty-state" *ngIf="orders.length === 0">
            No tienes pedidos realizados aún
          </p>
        </div>
      </section>

      <!-- Favoritos -->
      <section class="favorites-section" *ngIf="activeTab === 'favorites'">
        <h2>Mis Favoritos</h2>
        <div class="favorites-grid">
          <article class="favorite-card" *ngFor="let item of favorites">
            <img [src]="item.image" [alt]="item.name">
            <button class="remove-favorite" (click)="removeFavorite(item.id)" aria-label="Quitar de favoritos">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
            <div class="favorite-info">
              <h3>{{item.name}}</h3>
              <p class="favorite-price">${{item.price}}</p>
              <button class="add-to-cart-btn">Añadir al Carrito</button>
            </div>
          </article>

          <p class="empty-state" *ngIf="favorites.length === 0">
            No tienes productos favoritos aún
          </p>
        </div>
      </section>
    </div>
  </div>
</main>

<app-footer></app-footer>
